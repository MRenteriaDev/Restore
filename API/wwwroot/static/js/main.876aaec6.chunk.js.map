{"version":3,"sources":["app/layout/models/paginations.ts","app/util/util.tsx","features/basket/basketSlice.ts","features/account/accountSlice.ts","features/catalog/catalogSlice.ts","features/contact/counterSlice.ts","app/store/configureStore.ts","app/api/agent.ts","features/about/AboutPage.tsx","app/components/AppPagination.tsx","app/components/CheckBoxButtons.tsx","app/components/RadioButtonGroup.tsx","app/layout/LoadingComponent.tsx","features/catalog/ProductCard.tsx","features/catalog/ProductCardSkeleton.tsx","features/catalog/ProductList.tsx","features/catalog/ProductSearch.tsx","features/catalog/Catalog.tsx","app/errors/NotFound.tsx","features/catalog/ProductDetails.tsx","features/contact/ContactPage.tsx","features/home/HomePage.tsx","app/layout/SignedInMenu.tsx","app/layout/Header.tsx","features/basket/BasketSummary.tsx","features/basket/BasketTable.tsx","features/basket/BasketPage.tsx","features/account/Login.tsx","features/account/Register.tsx","app/layout/PrivateRoute.tsx","features/order/OrderDetails.tsx","features/order/Orders.tsx","app/components/AppTextInput.tsx","features/checkout/AppCheckBox.tsx","features/checkout/AddressForm.tsx","features/checkout/StripeInput.tsx","features/checkout/PaymentForm.tsx","features/checkout/Review.tsx","features/checkout/CheckoutValidation.ts","features/checkout/CheckoutPage.tsx","features/checkout/CheckoutWrapper.tsx","app/layout/App.tsx","reportWebVitals.ts","index.tsx"],"names":["PaginatedResponse","items","metaData","this","currencyFormat","amount","toFixed","fetchBasketAsync","createAsyncThunk","_","thunkAPI","a","agent","Basket","get","rejectWithValue","error","data","condition","key","b","document","cookie","match","pop","getCookie","addBasketItemAsync","productId","quantity","addItem","removeBasketItemAsync","removeItem","basketSlice","createSlice","name","initialState","basket","status","reducers","setBasket","state","action","payload","clearBasket","extraReducers","builder","addCase","pending","meta","arg","fulfilled","itemIndex","findIndex","i","undefined","splice","rejected","addMatcher","isAnyOf","actions","signInUser","Account","login","userDto","user","dispatch","localStorage","setItem","JSON","stringify","fetchCurrentUser","setUser","parse","getItem","currentuser","accountSlice","signOut","toast","success","history","push","productsAdapter","createEntityAdapter","getAxiosParams","productParams","params","URLSearchParams","append","pageNumber","toString","pageSize","orderBy","searchTerm","brands","length","types","fetchProductsAsync","getState","catalog","Catalog","list","response","setMetaData","fetchProductAsync","details","fetchFiltersAsync","fetchFilters","catalogSlice","getInitialState","productsLoaded","filtersLoaded","setProductsParams","setPageNumber","resetProductParams","setAll","addOne","productSelector","getSelectors","counterSlice","title","increment","decrement","store","configureStore","reducer","counter","account","useAppDispatch","useDispatch","useAppSelector","useSelector","sleep","Promise","resolve","setTimeout","axios","defaults","baseURL","process","withCredentials","responseBody","interceptors","request","use","config","token","headers","Authorization","pagination","errors","modelStateErrors","flat","pathname","reject","requests","url","then","body","post","delete","id","TestErrors","get400Error","get404Error","get401Error","getValidationError","get500Error","values","register","fetchAddress","Orders","fetch","create","Payments","createPaymentIntent","AboutPage","useState","validationErrors","setValidationErrors","Container","Typography","gutterBottom","variant","ButtonGroup","fullWidth","Button","onClick","catch","err","console","log","Alert","severity","AlertTitle","List","map","ListItem","ListItemText","AppPagination","onPageChange","currentPage","totalCount","totalPages","Box","display","justifyContent","alignItems","Pagination","color","size","count","page","onChange","e","CheckBoxButtons","checked","checkedItems","setCheckedItems","FormGroup","item","FormControlLabel","control","Checkbox","indexOf","value","newChecked","filter","handleChecked","label","RadioButtonGroup","options","selectedValue","FormControl","component","RadioGroup","Radio","LoadingComponent","message","Backdrop","open","invisible","height","CircularProgress","sx","position","top","ProductCard","product","Card","maxWidth","CardHeader","avatar","Avatar","bgcolor","charAt","toUpperCase","titleTypographyProps","fontWeight","CardMedia","backgroundSize","image","pictureUrl","CardContent","price","brand","type","CardActions","LoadingButton","loading","Link","to","ProductCardSkeleton","Grid","xs","Skeleton","animation","width","style","marginBottom","ProductList","products","container","spacing","ProductSerch","setSearchTerm","debouncedSearch","debounce","event","target","TextField","sortOptions","selectAll","useEffect","Paper","mb","p","NotFound","Divider","ProductDetails","useParams","selectById","productStatus","setQuantity","find","parseInt","includes","src","alt","TableContainer","Table","TableBody","TableRow","TableCell","description","quantityInStock","disabled","updateQuantity","reduceQuantity","ContactPage","HomePage","dots","infinite","speed","slidesToShow","slidesToScroll","maxHeight","SignedInMenu","React","anchorEl","setAnchorEl","Boolean","handleClose","currentTarget","typography","email","Menu","onClose","TransitionComponent","Fade","MenuItem","midLinks","path","rightLinks","navStyles","textDecoration","Header","darkMode","handleThemeChange","itemCount","reduce","sum","AppBar","Toolbar","NavLink","Switch","IconButton","Badge","badgeContent","ShoppingCart","BasketSummary","subtotal","deliveryFee","colSpan","align","fontStyle","BasketTable","isBasket","minWidth","TableHead","border","scope","marginRight","Remove","Add","Delete","BasketPage","Login","useHistory","location","useLocation","useForm","mode","handleSubmit","formState","isSubmitting","isValid","from","flexDirection","m","onSubmit","noValidate","mt","margin","autoFocus","required","username","helperText","min","password","Register","setError","forEach","handleApiErrors","pattern","PrivateRoute","Component","rest","render","props","OrderDetails","order","setSelectedOrder","orderItems","orders","setOrders","setLoading","selectedOrderNumber","setSelectedOrderNumber","finally","o","total","orderDate","split","orderStatus","AppTextInput","useController","defaultValue","fieldState","field","AppCheckBox","AddressForm","useFormContext","sm","isDirty","StripeInput","forwardRef","ref","elementRef","useRef","useImperativeHandle","focus","current","onReady","element","PaymentForm","cardState","onCardInputChange","md","elementError","cardNumber","autoComplete","InputLabelProps","shrink","InputProps","inputComponent","inputProps","CardNumberElement","cardExpiry","CardExpiryElement","cardCvc","CardCvcElement","Review","validationSchema","yup","fullName","address1","address2","city","zip","country","nameOnCard","steps","CheckoutPage","activeStep","setActiveStep","orderNumber","setOrderNumber","setCardState","cardComplete","setCardComplete","paymentMessage","setPaymentMessage","paymentSucceeded","setPaymentSucceeded","stripe","useStripe","elements","useElements","onCardInput","elementType","complete","currentValidationSchema","methods","resolver","yupResolver","submitOrder","saveAddress","shippingAddress","cardElement","getElement","confirmCardPayment","clientSecret","payment_method","card","billing_details","paymentResult","paymentIntent","reset","getValues","handleNext","handleBack","my","Stepper","pt","pb","Step","StepLabel","step","Error","getStepContent","ml","stripePermise","loadStripe","CheckoutWrapper","App","initApp","useCallback","setdarkMode","paletteType","theme","createTheme","palette","background","default","hideProgressBar","CssBaseline","exact","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","createBrowserHistory","ReactDOM","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.876aaec6.chunk.js","sourcesContent":["export interface MetaData {\r\n  currentPage: number;\r\n  totalPages: number;\r\n  pageSize: number;\r\n  totalCount: number;\r\n}\r\n\r\nexport class PaginatedResponse<T> {\r\n  items: T;\r\n  metaData: MetaData;\r\n\r\n  constructor(items: T, metaData: MetaData) {\r\n    this.items = items;\r\n    this.metaData = metaData;\r\n  }\r\n}\r\n","export function getCookie(key: string) {\r\n  var b = document.cookie.match(\"(^|;)\\\\s*\" + key + \"\\\\s*=\\\\s*([^;]+)\");\r\n  return b ? b.pop() : \"\";\r\n}\r\n\r\nexport function currencyFormat(amount: number) {\r\n  return \"$\" + (amount / 100).toFixed(2);\r\n}\r\n","import { createAsyncThunk, createSlice, isAnyOf } from \"@reduxjs/toolkit\";\r\nimport agent from \"../../app/api/agent\";\r\nimport { Basket } from \"../../app/layout/models/basket\";\r\nimport { getCookie } from \"../../app/util/util\";\r\n\r\ninterface BasketState {\r\n  basket: Basket | null;\r\n  status: string;\r\n}\r\n\r\nconst initialState: BasketState = {\r\n  basket: null,\r\n  status: \"idle\",\r\n};\r\n\r\nexport const fetchBasketAsync = createAsyncThunk<Basket>(\r\n  \"basket/fetchBasketAsync\",\r\n  async (_, thunkAPI) => {\r\n    try {\r\n      return await agent.Basket.get();\r\n    } catch (error: any) {\r\n      return thunkAPI.rejectWithValue({ error: error.data });\r\n    }\r\n  },\r\n  {\r\n    condition: () => {\r\n      if (!getCookie(\"buyerId\")) return false;\r\n    },\r\n  }\r\n);\r\n\r\nexport const addBasketItemAsync = createAsyncThunk<\r\n  Basket,\r\n  { productId: number; quantity?: number }\r\n>(\r\n  \"basket/addBasketItemAsync\",\r\n  async ({ productId, quantity = 1 }, thunkAPI) => {\r\n    try {\r\n      return await agent.Basket.addItem(productId, quantity);\r\n    } catch (error: any) {\r\n      return thunkAPI.rejectWithValue({ error: error.data });\r\n    }\r\n  }\r\n);\r\n\r\nexport const removeBasketItemAsync = createAsyncThunk<\r\n  void,\r\n  { productId: number; quantity: number; name?: string }\r\n>(\"basket/removeBasketItemAsync\", async ({ productId, quantity }, thunkAPI) => {\r\n  try {\r\n    await agent.Basket.removeItem(productId, quantity);\r\n  } catch (error: any) {\r\n    return thunkAPI.rejectWithValue({ error: error.data });\r\n  }\r\n});\r\n\r\nexport const basketSlice = createSlice({\r\n  name: \"basket\",\r\n  initialState,\r\n  reducers: {\r\n    setBasket: (state, action) => {\r\n      state.basket = action.payload;\r\n    },\r\n    clearBasket: (state) => {\r\n      state.basket = null;\r\n    },\r\n  },\r\n  extraReducers: (builder) => {\r\n    builder.addCase(addBasketItemAsync.pending, (state, action) => {\r\n      state.status = \"pendingAddItem\" + action.meta.arg.productId;\r\n    });\r\n    builder.addCase(removeBasketItemAsync.pending, (state, action) => {\r\n      state.status =\r\n        \"pendingRemoveItem\" + action.meta.arg.productId + action.meta.arg.name;\r\n    });\r\n    builder.addCase(removeBasketItemAsync.fulfilled, (state, action) => {\r\n      const { productId, quantity } = action.meta.arg;\r\n      const itemIndex = state.basket?.items.findIndex(\r\n        (i) => i.productId === productId\r\n      );\r\n      if (itemIndex === -1 || itemIndex === undefined) return;\r\n      state.basket!.items[itemIndex].quantity -= quantity;\r\n      if (state.basket?.items[itemIndex].quantity === 0)\r\n        state.basket.items.splice(itemIndex, 1);\r\n      state.status = \"idle\";\r\n    });\r\n    builder.addCase(removeBasketItemAsync.rejected, (state, action) => {\r\n      state.status = \"idle\";\r\n    });\r\n    builder.addMatcher(\r\n      isAnyOf(addBasketItemAsync.fulfilled, fetchBasketAsync.fulfilled),\r\n      (state, action) => {\r\n        state.basket = action.payload;\r\n        state.status = \"idle\";\r\n      }\r\n    );\r\n    builder.addMatcher(\r\n      isAnyOf(addBasketItemAsync.rejected, fetchBasketAsync.rejected),\r\n      (state, action) => {\r\n        state.status = \"idle\";\r\n      }\r\n    );\r\n  },\r\n});\r\n\r\nexport const { setBasket, clearBasket } = basketSlice.actions;\r\n","import { createAsyncThunk, createSlice, isAnyOf } from \"@reduxjs/toolkit\";\r\nimport { FieldValues } from \"react-hook-form\";\r\nimport agent from \"../../app/api/agent\";\r\nimport { history } from \"./../../index\";\r\nimport { User } from \"../../app/layout/models/user\";\r\nimport { toast } from \"react-toastify\";\r\nimport { setBasket } from \"../basket/basketSlice\";\r\n\r\ninterface AccountState {\r\n  user: User | null;\r\n}\r\n\r\nconst initialState: AccountState = {\r\n  user: null,\r\n};\r\n\r\nexport const signInUser = createAsyncThunk<User, FieldValues>(\r\n  \"account/signInUser\",\r\n  async (data, thunkAPI) => {\r\n    try {\r\n      const userDto = await agent.Account.login(data);\r\n      const { basket, ...user } = userDto;\r\n      if (basket) thunkAPI.dispatch(setBasket(basket));\r\n      localStorage.setItem(\"user\", JSON.stringify(user));\r\n      return user;\r\n    } catch (error: any) {\r\n      return thunkAPI.rejectWithValue({ error: error.data });\r\n    }\r\n  }\r\n);\r\n\r\nexport const fetchCurrentUser = createAsyncThunk<User>(\r\n  \"account/fetchCurrentUser\",\r\n  async (_, thunkAPI) => {\r\n    thunkAPI.dispatch(setUser(JSON.parse(localStorage.getItem(\"user\")!)));\r\n    try {\r\n      const userDto = await agent.Account.currentuser();\r\n      const { basket, ...user } = userDto;\r\n      if (basket) thunkAPI.dispatch(setBasket(basket));\r\n      localStorage.setItem(\"user\", JSON.stringify(user));\r\n      return user;\r\n    } catch (error: any) {\r\n      return thunkAPI.rejectWithValue({ error: error.data });\r\n    }\r\n  },\r\n  {\r\n    condition: () => {\r\n      if (!localStorage.getItem(\"user\")) return false;\r\n    },\r\n  }\r\n);\r\n\r\n\r\nexport const accountSlice = createSlice({\r\n  name: \"account\",\r\n  initialState,\r\n  reducers: {\r\n    signOut: (state) => {\r\n      state.user = null;\r\n      localStorage.removeItem(\"user\");\r\n      toast.success(\"Logout Success\");\r\n      history.push(\"/\");\r\n    },\r\n    setUser: (state, action) => {\r\n      state.user = action.payload;\r\n    },\r\n  },\r\n  extraReducers: (builder) => {\r\n    builder.addCase(fetchCurrentUser.rejected, (state) => {\r\n      state.user = null;\r\n      localStorage.removeItem(\"user\");\r\n      toast.error(\"Session expired - please login again\");\r\n      history.push(\"/\");\r\n    });\r\n    builder.addMatcher(\r\n      isAnyOf(signInUser.fulfilled, fetchCurrentUser.fulfilled),\r\n      (state, action) => {\r\n        state.user = action.payload;\r\n      }\r\n    );\r\n    builder.addMatcher(isAnyOf(signInUser.rejected), (state, action) => {\r\n      throw action.payload;\r\n    });\r\n  },\r\n});\r\n\r\nexport const { signOut, setUser } = accountSlice.actions;\r\n","import {\r\n  createAsyncThunk,\r\n  createEntityAdapter,\r\n  createSlice,\r\n} from \"@reduxjs/toolkit\";\r\nimport agent from \"../../app/api/agent\";\r\nimport { MetaData } from \"../../app/layout/models/paginations\";\r\nimport { Product, ProductParams } from \"../../app/layout/models/Products\";\r\nimport { RootState } from \"../../app/store/configureStore\";\r\n\r\ninterface CatalogState {\r\n  productsLoaded: boolean;\r\n  filtersLoaded: boolean;\r\n  status: string;\r\n  brands: string[];\r\n  types: string[];\r\n  productParams: ProductParams;\r\n  metaData: MetaData | null;\r\n}\r\n\r\nconst productsAdapter = createEntityAdapter<Product>();\r\n\r\nfunction getAxiosParams(productParams: ProductParams) {\r\n  const params = new URLSearchParams();\r\n  params.append(\"pageNumber\", productParams.pageNumber.toString());\r\n  params.append(\"pageSize\", productParams.pageSize.toString());\r\n  params.append(\"orderBy\", productParams.orderBy.toString());\r\n\r\n  if (productParams.searchTerm)\r\n    params.append(\"searchTerm\", productParams.searchTerm.toString());\r\n\r\n  if (productParams.brands.length > 0)\r\n    params.append(\"brands\", productParams.brands.toString());\r\n\r\n  if (productParams.types.length > 0)\r\n    params.append(\"types\", productParams.types.toString());\r\n\r\n  return params;\r\n}\r\n\r\nexport const fetchProductsAsync = createAsyncThunk<\r\n  Product[],\r\n  void,\r\n  { state: RootState }\r\n>(\"catalog/fetchProductsAsync\", async (_, thunkAPI) => {\r\n  const params = getAxiosParams(thunkAPI.getState().catalog.productParams);\r\n  try {\r\n    var response = await agent.Catalog.list(params);\r\n    thunkAPI.dispatch(setMetaData(response.metaData));\r\n    return response.items;\r\n  } catch (error: any) {\r\n    return thunkAPI.rejectWithValue({ error: error.data });\r\n  }\r\n});\r\n\r\nexport const fetchProductAsync = createAsyncThunk<Product, number>(\r\n  \"catalog/fetchProductAsync\",\r\n  async (productId, thunkAPI) => {\r\n    try {\r\n      return await agent.Catalog.details(productId);\r\n    } catch (error: any) {\r\n      return thunkAPI.rejectWithValue({ error: error.data });\r\n    }\r\n  }\r\n);\r\n\r\nexport const fetchFiltersAsync = createAsyncThunk(\r\n  \"catalog/fetchFilters\",\r\n  async (_, thunkAPI) => {\r\n    try {\r\n      return agent.Catalog.fetchFilters();\r\n    } catch (error: any) {\r\n      return thunkAPI.rejectWithValue({ error: error.data });\r\n    }\r\n  }\r\n);\r\n\r\nfunction initParams() {\r\n  return {\r\n    pageNumber: 1,\r\n    pageSize: 6,\r\n    orderBy: \"name\",\r\n    brands: [],\r\n    types: [],\r\n  };\r\n}\r\n\r\nexport const catalogSlice = createSlice({\r\n  name: \"catalog\",\r\n  initialState: productsAdapter.getInitialState<CatalogState>({\r\n    productsLoaded: false,\r\n    filtersLoaded: false,\r\n    status: \"idle\",\r\n    brands: [],\r\n    types: [],\r\n    productParams: initParams(),\r\n    metaData: null,\r\n  }),\r\n  reducers: {\r\n    setProductsParams: (state, action) => {\r\n      state.productsLoaded = false;\r\n      state.productParams = {\r\n        ...state.productParams,\r\n        ...action.payload,\r\n      };\r\n    },\r\n    setPageNumber: (state, action) => {\r\n      state.productsLoaded = false;\r\n      state.productParams = {\r\n        ...state.productParams,\r\n        ...action.payload,\r\n        pageNumber: 1,\r\n      };\r\n    },\r\n    setMetaData: (state, action) => {\r\n      state.metaData = action.payload;\r\n    },\r\n    resetProductParams: (state) => {\r\n      state.productParams = initParams();\r\n    },\r\n  },\r\n  extraReducers: (builder) => {\r\n    builder.addCase(fetchProductsAsync.pending, (state) => {\r\n      state.status = \"pendingFetchProducts\";\r\n    });\r\n    builder.addCase(fetchProductsAsync.fulfilled, (state, action) => {\r\n      productsAdapter.setAll(state, action.payload);\r\n      state.status = \"idle\";\r\n      state.productsLoaded = true;\r\n    });\r\n    builder.addCase(fetchProductsAsync.rejected, (state, action) => {\r\n      state.status = \"idle\";\r\n    });\r\n    // For fetch one product\r\n    builder.addCase(fetchProductAsync.pending, (state) => {\r\n      state.status = \"pendingFetchProduct\";\r\n    });\r\n    builder.addCase(fetchProductAsync.fulfilled, (state, action) => {\r\n      productsAdapter.addOne(state, action.payload);\r\n      state.status = \"idle\";\r\n    });\r\n    builder.addCase(fetchProductAsync.rejected, (state, action) => {\r\n      state.status = \"idle\";\r\n    });\r\n    builder.addCase(fetchFiltersAsync.pending, (state) => {\r\n      state.status = \"pendingFetchingFilters\";\r\n    });\r\n    builder.addCase(fetchFiltersAsync.fulfilled, (state, action) => {\r\n      state.status = \"idle\";\r\n      state.brands = action.payload.brands;\r\n      state.types = action.payload.types;\r\n      state.filtersLoaded = true;\r\n    });\r\n    builder.addCase(fetchFiltersAsync.rejected, (state, action) => {\r\n      state.status = \"idle\";\r\n    });\r\n  },\r\n});\r\n\r\nexport const productSelector = productsAdapter.getSelectors(\r\n  (state: RootState) => state.catalog\r\n);\r\n\r\nexport const {\r\n  setProductsParams,\r\n  resetProductParams,\r\n  setMetaData,\r\n  setPageNumber,\r\n} = catalogSlice.actions;\r\n","import { createSlice } from \"@reduxjs/toolkit\";\r\n\r\nexport interface CounterState {\r\n  data: number;\r\n  title: string;\r\n}\r\n\r\nconst initialState: CounterState = {\r\n  data: 44,\r\n  title: \"YARC (yet another redux counter with redux tooolkit)\",\r\n};\r\n\r\nexport const counterSlice = createSlice({\r\n  name: \"counter\",\r\n  initialState,\r\n  reducers: {\r\n    increment: (state, action) => {\r\n      state.data += action.payload;\r\n    },\r\n    decrement: (state, action) => {\r\n      state.data -= action.payload;\r\n    },\r\n  },\r\n});\r\n\r\nexport const { increment, decrement } = counterSlice.actions;\r\n","import { configureStore } from \"@reduxjs/toolkit\";\r\nimport { TypedUseSelectorHook, useDispatch, useSelector } from \"react-redux\";\r\nimport { accountSlice } from \"../../features/account/accountSlice\";\r\nimport { basketSlice } from \"../../features/basket/basketSlice\";\r\nimport { catalogSlice } from \"../../features/catalog/catalogSlice\";\r\nimport { counterSlice } from \"../../features/contact/counterSlice\";\r\n\r\n// export function configureStore() {\r\n//   return createStore(counterReducer);\r\n// }\r\n\r\nexport const store = configureStore({\r\n  reducer: {\r\n    counter: counterSlice.reducer,\r\n    basket: basketSlice.reducer,\r\n    catalog: catalogSlice.reducer,\r\n    account: accountSlice.reducer,\r\n  },\r\n});\r\n\r\nexport type RootState = ReturnType<typeof store.getState>;\r\nexport type AppDisapatch = typeof store.dispatch;\r\n\r\nexport const useAppDispatch = () => useDispatch<AppDisapatch>();\r\nexport const useAppSelector: TypedUseSelectorHook<RootState> = useSelector;\r\n","import axios, { AxiosError, AxiosResponse } from \"axios\";\r\nimport { toast } from \"react-toastify\";\r\nimport { history } from \"../..\";\r\nimport { PaginatedResponse } from \"../layout/models/paginations\";\r\nimport { store } from \"../store/configureStore\";\r\n\r\nconst sleep = () => new Promise((resolve) => setTimeout(resolve, 500));\r\n\r\naxios.defaults.baseURL = process.env.REACT_APP_API_URL;\r\naxios.defaults.withCredentials = true;\r\n\r\nconst responseBody = (response: AxiosResponse) => response.data;\r\n\r\naxios.interceptors.request.use((config: any) => {\r\n  const token = store.getState().account.user?.token;\r\n  if (token) config.headers.Authorization = `Bearer ${token}`;\r\n  return config;\r\n});\r\n\r\naxios.interceptors.response.use(\r\n  async (response) => {\r\n    if (process.env.NODE_ENV === \"development\") await sleep();\r\n    await sleep();\r\n    const pagination = response.headers[\"pagination\"];\r\n    if (pagination) {\r\n      response.data = new PaginatedResponse(\r\n        response.data,\r\n        JSON.parse(pagination)\r\n      );\r\n      return response;\r\n    }\r\n    return response;\r\n  },\r\n  (error: AxiosError) => {\r\n    const { data, status } = error.response!;\r\n    switch (status) {\r\n      case 400:\r\n        if (data.errors) {\r\n          const modelStateErrors: string[] = [];\r\n          for (const key in data.errors) {\r\n            if (data.errors[key]) {\r\n              modelStateErrors.push(data.errors[key]);\r\n            }\r\n          }\r\n          throw modelStateErrors.flat();\r\n        }\r\n        toast.error(data.title);\r\n        break;\r\n      case 401:\r\n        toast.error(data.title || \"Unauthorised\");\r\n        break;\r\n      case 404:\r\n        toast.error(data.title);\r\n        break;\r\n      case 500:\r\n        history.push({\r\n          pathname: \"/server-error\",\r\n          state: { error: data },\r\n        });\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    return Promise.reject(error.response);\r\n  }\r\n);\r\n\r\nconst requests = {\r\n  get: (url: string, params?: URLSearchParams) =>\r\n    axios.get(url, { params }).then(responseBody),\r\n  post: (url: string, body: {}) => axios.post(url, body).then(responseBody),\r\n  put: (url: string, body: {}) => axios.put(url, body).then(responseBody),\r\n  delete: (url: string) => axios.delete(url).then(responseBody),\r\n};\r\n\r\nconst Catalog = {\r\n  list: (params: URLSearchParams) => requests.get(\"products\", params),\r\n  details: (id: number) => requests.get(`products/${id}`),\r\n  fetchFilters: () => requests.get(\"products/filters\"),\r\n};\r\n\r\nconst TestErrors = {\r\n  get400Error: () => requests.get(\"buggy/bad-request\"),\r\n  get404Error: () => requests.get(\"buggy/not-found\"),\r\n  get401Error: () => requests.get(\"buggy/unauthorized\"),\r\n  getValidationError: () => requests.get(\"buggy/validation-error\"),\r\n  get500Error: () => requests.get(\"buggy/server-error\"),\r\n};\r\n\r\nconst Basket = {\r\n  get: () => requests.get(\"basket\"),\r\n  addItem: (productId: number, quantity = 1) =>\r\n    requests.post(`basket?productId=${productId}&quantity=${quantity}`, {}),\r\n  removeItem: (productId: number, quantity = 1) =>\r\n    requests.delete(`basket?productId=${productId}&quantity=${quantity}`),\r\n};\r\n\r\nconst Account = {\r\n  login: (values: any) => requests.post(\"account/login\", values),\r\n  register: (values: any) => requests.post(\"account/register\", values),\r\n  currentuser: () => requests.get(\"account/currentUser\"),\r\n  fetchAddress: () => requests.get(\"account/savedAddress\"),\r\n};\r\n\r\nconst Orders = {\r\n  list: () => requests.get(\"orders\"),\r\n  fetch: (id: number) => requests.get(`orders/${id}`),\r\n  create: (values: any) => requests.post(\"orders\", values),\r\n};\r\n\r\nconst Payments = {\r\n  createPaymentIntent: () => requests.post(\"payments\", {}),\r\n};\r\n\r\nconst agent = {\r\n  Catalog,\r\n  TestErrors,\r\n  Basket,\r\n  Account,\r\n  Orders,\r\n  Payments,\r\n};\r\n\r\nexport default agent;\r\n","import {\r\n  Alert,\r\n  AlertTitle,\r\n  Button,\r\n  ButtonGroup,\r\n  Container,\r\n  List,\r\n  ListItem,\r\n  ListItemText,\r\n  Typography,\r\n} from \"@mui/material\";\r\nimport { useState } from \"react\";\r\nimport agent from \"../../app/api/agent\";\r\n\r\nexport default function AboutPage() {\r\n  const [validationErrors, setValidationErrors] = useState<string[]>([]);\r\n\r\n  function getValidationError() {\r\n    agent.TestErrors.getValidationError()\r\n      .then(() => console.log(\"you should not see this!!\"))\r\n      .catch((err) => setValidationErrors(err));\r\n  }\r\n\r\n  return (\r\n    <Container>\r\n      <Typography gutterBottom variant=\"h2\">\r\n        Erros for testing purposes\r\n      </Typography>\r\n      <ButtonGroup fullWidth>\r\n        <Button\r\n          variant=\"contained\"\r\n          onClick={() =>\r\n            agent.TestErrors.get400Error().catch((err) => console.log(err))\r\n          }\r\n        >\r\n          Test 400 Error{\" \"}\r\n        </Button>\r\n        <Button\r\n          variant=\"contained\"\r\n          onClick={() =>\r\n            agent.TestErrors.get401Error().catch((err) => console.log(err))\r\n          }\r\n        >\r\n          Test 401 Error{\" \"}\r\n        </Button>\r\n        <Button\r\n          variant=\"contained\"\r\n          onClick={() =>\r\n            agent.TestErrors.get404Error().catch((err) => console.log(err))\r\n          }\r\n        >\r\n          Test 404 Error{\" \"}\r\n        </Button>\r\n        <Button\r\n          variant=\"contained\"\r\n          onClick={() =>\r\n            agent.TestErrors.get500Error().catch((err) => console.log(err))\r\n          }\r\n        >\r\n          Test Error 500\r\n        </Button>\r\n        <Button\r\n          variant=\"contained\"\r\n          onClick={getValidationError}\r\n        >\r\n          Get Validation Error\r\n        </Button>\r\n      </ButtonGroup>\r\n      {validationErrors.length > 0 && (\r\n        <Alert severity=\"error\">\r\n          <AlertTitle>Validation Errors</AlertTitle>\r\n          <List>\r\n            {validationErrors.map((error) => (\r\n              <ListItem key={error}>\r\n                <ListItemText>{error}</ListItemText>\r\n              </ListItem>\r\n            ))}\r\n          </List>\r\n        </Alert>\r\n      )}\r\n    </Container>\r\n  );\r\n}\r\n","import { Box, Typography, Pagination } from \"@mui/material\";\r\nimport { MetaData } from \"../layout/models/paginations\";\r\n\r\ninterface Props {\r\n  metaData: MetaData;\r\n  onPageChange: (page: number) => void;\r\n}\r\n\r\nexport default function AppPagination({ metaData, onPageChange }: Props) {\r\n  const { currentPage, totalCount, totalPages, pageSize } = metaData;\r\n  return (\r\n    <Box display=\"flex\" justifyContent=\"space-between\" alignItems=\"center\">\r\n      <Typography>\r\n        Displaying {(currentPage - 1) * pageSize + 1}-\r\n        {currentPage * pageSize > totalCount\r\n          ? totalCount\r\n          : currentPage * pageSize}{\" \"}\r\n        of {totalCount} items\r\n      </Typography>\r\n      <Pagination\r\n        color=\"secondary\"\r\n        size=\"large\"\r\n        count={totalPages}\r\n        page={currentPage}\r\n        onChange={(e, page) => onPageChange(page)}\r\n      />\r\n    </Box>\r\n  );\r\n}\r\n","import { FormGroup, FormControlLabel, Checkbox } from \"@mui/material\";\r\nimport { useState } from \"react\";\r\n\r\ninterface Props {\r\n  items: string[];\r\n  checked?: string[];\r\n  onChange: (items: string[]) => void;\r\n}\r\n\r\nexport default function CheckBoxButtons({ items, checked, onChange }: Props) {\r\n  const [checkedItems, setCheckedItems] = useState(checked || []);\r\n\r\n  function handleChecked(value: string) {\r\n    const currentIndex = checkedItems.findIndex((item) => item === value);\r\n    let newChecked: string[] = [];\r\n    if (currentIndex === -1) newChecked = [...checkedItems, value];\r\n    else newChecked = checkedItems.filter((item) => item !== value);\r\n    setCheckedItems(newChecked);\r\n    onChange(newChecked);\r\n  }\r\n\r\n  return (\r\n    <FormGroup>\r\n      {items.map((item) => (\r\n        <FormControlLabel\r\n          control={\r\n            <Checkbox\r\n              checked={checkedItems.indexOf(item) !== -1}\r\n              onClick={() => handleChecked(item)}\r\n            />\r\n          }\r\n          label={item}\r\n          key={item}\r\n        />\r\n      ))}\r\n    </FormGroup>\r\n  );\r\n}\r\n","import {\r\n  FormControl,\r\n  RadioGroup,\r\n  FormControlLabel,\r\n  Radio,\r\n} from \"@mui/material\";\r\n\r\ninterface Props {\r\n  options: any[];\r\n  onChange: (event: any) => void;\r\n  selectedValue: string;\r\n}\r\n\r\nexport default function RadioButtonGroup({\r\n  options,\r\n  onChange,\r\n  selectedValue,\r\n}: Props) {\r\n  return (\r\n    <FormControl component=\"fieldset\">\r\n      <RadioGroup onChange={onChange} value={selectedValue}>\r\n        {options.map(({ value, label }) => (\r\n          <FormControlLabel\r\n            value={value}\r\n            control={<Radio />}\r\n            label={label}\r\n            key={value}\r\n          />\r\n        ))}\r\n      </RadioGroup>\r\n    </FormControl>\r\n  );\r\n}\r\n","import { Backdrop, Box, CircularProgress, Typography } from \"@mui/material\";\r\n\r\ninterface Props {\r\n  message?: string;\r\n}\r\n\r\nexport default function LoadingComponent({ message = \"Loading...\" }: Props) {\r\n  return (\r\n    <Backdrop open={true} invisible={true}>\r\n      <Box\r\n        display=\"flex\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"100vh\"\r\n      >\r\n        <CircularProgress size={100} color=\"secondary\" />\r\n        <Typography\r\n          variant=\"h4\"\r\n          sx={{ justifyContent: \"center\", position: \"fixed\", top: \"60%\" }}\r\n        >\r\n          {message}\r\n        </Typography>\r\n      </Box>\r\n    </Backdrop>\r\n  );\r\n}\r\n","import {\r\n  Avatar,\r\n  Button,\r\n  Card,\r\n  CardActions,\r\n  CardContent,\r\n  CardHeader,\r\n  CardMedia,\r\n  Typography,\r\n} from \"@mui/material\";\r\nimport { LoadingButton } from \"@mui/lab\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Product } from \"../../app/layout/models/Products\";\r\nimport { useAppDispatch, useAppSelector } from \"../../app/store/configureStore\";\r\nimport { addBasketItemAsync } from \"../basket/basketSlice\";\r\n\r\ninterface Props {\r\n  product: Product;\r\n}\r\n\r\nexport default function ProductCard({ product }: Props) {\r\n  const { status } = useAppSelector((state) => state.basket);\r\n  const dispatch = useAppDispatch();\r\n\r\n  return (\r\n    <Card sx={{ maxWidth: 345 }}>\r\n      <CardHeader\r\n        avatar={\r\n          <Avatar sx={{ bgcolor: \"secondary.main\" }}>\r\n            {product.name.charAt(0).toUpperCase()}\r\n          </Avatar>\r\n        }\r\n        title={product.name}\r\n        titleTypographyProps={{\r\n          sx: { fontWeight: \"bold\", color: \"secondary.main\" },\r\n        }}\r\n      ></CardHeader>\r\n      <CardMedia\r\n        sx={{\r\n          height: 140,\r\n          backgroundSize: \"contain\",\r\n          bgcolor: \"primary.light\",\r\n        }}\r\n        image={product.pictureUrl}\r\n        title={product.name}\r\n      />\r\n      <CardContent>\r\n        <Typography gutterBottom variant=\"h5\" component=\"div\">\r\n          ${(product.price / 100).toFixed(2)}\r\n        </Typography>\r\n        <Typography variant=\"body2\" color=\"GrayText.secondary\">\r\n          {product.brand} - {product.type}\r\n        </Typography>\r\n      </CardContent>\r\n      <CardActions>\r\n        <LoadingButton\r\n          loading={status === \"pendingAddItem\" + product.id}\r\n          onClick={() =>\r\n            dispatch(addBasketItemAsync({ productId: product.id }))\r\n          }\r\n          size=\"small\"\r\n        >\r\n          Add To Cart\r\n        </LoadingButton>\r\n        <Button component={Link} to={`catalog/${product.id}`} size=\"small\">\r\n          View\r\n        </Button>\r\n      </CardActions>\r\n    </Card>\r\n  );\r\n}\r\n","import {\r\n  Card,\r\n  CardActions,\r\n  CardContent,\r\n  CardHeader,\r\n  Grid,\r\n  Skeleton,\r\n} from \"@mui/material\";\r\n\r\nexport default function ProductCardSkeleton() {\r\n  return (\r\n    <Grid item xs component={Card}>\r\n      <CardHeader\r\n        avatar={\r\n          <Skeleton\r\n            animation=\"wave\"\r\n            variant=\"circular\"\r\n            width={40}\r\n            height={40}\r\n          />\r\n        }\r\n        title={\r\n          <Skeleton\r\n            animation=\"wave\"\r\n            height={10}\r\n            width=\"80%\"\r\n            style={{ marginBottom: 6 }}\r\n          />\r\n        }\r\n      />\r\n      <Skeleton sx={{ height: 190 }} animation=\"wave\" variant=\"rectangular\" />\r\n      <CardContent>\r\n        <>\r\n          <Skeleton animation=\"wave\" height={10} style={{ marginBottom: 6 }} />\r\n          <Skeleton animation=\"wave\" height={10} width=\"80%\" />\r\n        </>\r\n      </CardContent>\r\n      <CardActions>\r\n        <>\r\n          <Skeleton animation=\"wave\" height={10} width=\"40%\" />\r\n          <Skeleton animation=\"wave\" height={10} width=\"20%\" />\r\n        </>\r\n      </CardActions>\r\n    </Grid>\r\n  );\r\n}\r\n","import { Grid } from \"@mui/material\";\r\nimport { Product } from \"../../app/layout/models/Products\";\r\nimport { useAppSelector } from \"../../app/store/configureStore\";\r\nimport ProductCard from \"./ProductCard\";\r\nimport ProductCardSkeleton from \"./ProductCardSkeleton\";\r\n\r\ninterface Props {\r\n  products: Product[];\r\n}\r\n\r\nexport default function ProductList({ products }: Props) {\r\n  const { productsLoaded } = useAppSelector((state) => state.catalog);\r\n  return (\r\n    <Grid container spacing={4}>\r\n      {products.map((product) => (\r\n        <Grid item xs={4} key={product.id}>\r\n          {!productsLoaded ? (\r\n            <ProductCardSkeleton />\r\n          ) : (\r\n            <ProductCard product={product} />\r\n          )}\r\n        </Grid>\r\n      ))}\r\n    </Grid>\r\n  );\r\n}\r\n","import { debounce, TextField } from \"@mui/material\";\r\nimport { useState } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { useAppSelector } from \"../../app/store/configureStore\";\r\nimport { setProductsParams } from \"./catalogSlice\";\r\n\r\nexport default function ProductSerch() {\r\n  const { productParams } = useAppSelector((state) => state.catalog);\r\n  const [searchTerm, setSearchTerm] = useState(productParams.searchTerm);\r\n  const dispatch = useDispatch();\r\n\r\n  const debouncedSearch = debounce((event: any) => {\r\n    dispatch(setProductsParams({ searchTerm: event.target.value }));\r\n  }, 1000);\r\n\r\n  return (\r\n    <TextField\r\n      label=\"Search Products..\"\r\n      variant=\"outlined\"\r\n      fullWidth\r\n      value={searchTerm || \"\"}\r\n      onChange={(event: any) => {\r\n        setSearchTerm(event.target.value);\r\n        debouncedSearch(event);\r\n      }}\r\n    />\r\n  );\r\n}\r\n","import {\r\n  Grid,\r\n  Paper,\r\n} from \"@mui/material\";\r\nimport { useEffect } from \"react\";\r\nimport AppPagination from \"../../app/components/AppPagination\";\r\nimport CheckBoxButtons from \"../../app/components/CheckBoxButtons\";\r\nimport RadioButtonGroup from \"../../app/components/RadioButtonGroup\";\r\nimport LoadingComponent from \"../../app/layout/LoadingComponent\";\r\nimport { useAppDispatch, useAppSelector } from \"../../app/store/configureStore\";\r\nimport {\r\n  fetchFiltersAsync,\r\n  fetchProductsAsync,\r\n  productSelector,\r\n  setProductsParams,\r\n} from \"./catalogSlice\";\r\nimport ProductList from \"./ProductList\";\r\nimport ProductSerch from \"./ProductSearch\";\r\n\r\nconst sortOptions = [\r\n  { value: \"name\", label: \"Alphabetical\" },\r\n  { value: \"priceDec\", label: \"Price - High To Low\" },\r\n  { value: \"price\", label: \"Price - Low To High\" },\r\n];\r\n\r\nexport default function Catalog() {\r\n  const products = useAppSelector(productSelector.selectAll);\r\n  const {\r\n    productsLoaded,\r\n    filtersLoaded,\r\n    brands,\r\n    types,\r\n    productParams,\r\n    metaData,\r\n  } = useAppSelector((state) => state.catalog);\r\n  const dispatch = useAppDispatch();\r\n\r\n  useEffect(() => {\r\n    if (!productsLoaded) dispatch(fetchProductsAsync());\r\n  }, [productsLoaded, dispatch]);\r\n\r\n  useEffect(() => {\r\n    if (!filtersLoaded) dispatch(fetchFiltersAsync());\r\n  }, [dispatch, filtersLoaded]);\r\n\r\n  if (!filtersLoaded) return <LoadingComponent message=\"Loading Products\" />;\r\n\r\n  return (\r\n    <Grid container spacing={4}>\r\n      <Grid item xs={3}>\r\n        <Paper sx={{ mb: 4 }}>\r\n          <ProductSerch />\r\n        </Paper>\r\n        <Paper sx={{ mb: 2, p: 2 }}>\r\n          <RadioButtonGroup\r\n            selectedValue={productParams.orderBy}\r\n            options={sortOptions}\r\n            onChange={(e) =>\r\n              dispatch(setProductsParams({ orderBy: e.target.value }))\r\n            }\r\n          />\r\n        </Paper>\r\n        <Paper sx={{ mb: 2, p: 2 }}>\r\n          <CheckBoxButtons\r\n            items={brands}\r\n            checked={productParams.brands}\r\n            onChange={(items: string[]) =>\r\n              dispatch(setProductsParams({ brands: items }))\r\n            }\r\n          />\r\n        </Paper>\r\n        <Paper sx={{ mb: 2, p: 2 }}>\r\n          <CheckBoxButtons\r\n            items={types}\r\n            checked={productParams.types}\r\n            onChange={(items: string[]) =>\r\n              dispatch(setProductsParams({ types: items }))\r\n            }\r\n          />\r\n        </Paper>\r\n      </Grid>\r\n      <Grid item xs={9}>\r\n        <ProductList products={products} />\r\n      </Grid>\r\n      <Grid item xs={3} />\r\n      <Grid item xs={9} sx={{ mb: 2 }}>\r\n        {metaData && (\r\n          <AppPagination\r\n            metaData={metaData}\r\n            onPageChange={(page: number) =>\r\n              dispatch(setProductsParams({ pageNumber: page }))\r\n            }\r\n          />\r\n        )}\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n}\r\n","import { Button, Container, Divider, Paper, Typography } from \"@mui/material\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nexport default function NotFound() {\r\n  return (\r\n    <Container component={Paper} sx={{ height: 400 }}>\r\n      <Typography gutterBottom variant=\"h2\">\r\n        Oops, were could not find youre looking for\r\n      </Typography>\r\n      <Divider />\r\n      <Button fullWidth component={Link} to=\"/catalog\">\r\n        Go to back to Shop\r\n      </Button>\r\n    </Container>\r\n  );\r\n}\r\n","import { LoadingButton } from \"@mui/lab\";\r\nimport {\r\n  Divider,\r\n  Grid,\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableContainer,\r\n  TableRow,\r\n  TextField,\r\n  Typography,\r\n} from \"@mui/material\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { useParams } from \"react-router\";\r\nimport NotFound from \"../../app/errors/NotFound\";\r\nimport LoadingComponent from \"../../app/layout/LoadingComponent\";\r\nimport { useAppSelector } from \"../../app/store/configureStore\";\r\nimport {\r\n  addBasketItemAsync,\r\n  removeBasketItemAsync,\r\n} from \"../basket/basketSlice\";\r\nimport { fetchProductAsync, productSelector } from \"./catalogSlice\";\r\n\r\nexport default function ProductDetails() {\r\n  const { basket, status } = useAppSelector((state) => state.basket);\r\n  const dispatch = useDispatch();\r\n  const { id } = useParams<{ id: string }>();\r\n  const product = useAppSelector((state) =>\r\n    productSelector.selectById(state, id)\r\n  );\r\n  const { status: productStatus } = useAppSelector((state) => state.catalog);\r\n  const [quantity, setQuantity] = useState(0);\r\n\r\n  const item = basket?.items.find((i) => i.productId === product?.id);\r\n\r\n  useEffect(() => {\r\n    if (item) setQuantity(item.quantity);\r\n    if (!product) dispatch(fetchProductAsync(parseInt(id)));\r\n  }, [id, item, dispatch, product]);\r\n\r\n  function handleInputChange(event: any) {\r\n    if (event.target.value >= 0) {\r\n      setQuantity(parseInt(event.target.value));\r\n    }\r\n  }\r\n\r\n  function handleInputCart() {\r\n    if (!item || quantity > item.quantity) {\r\n      const updateQuantity = item ? quantity - item.quantity : quantity;\r\n      dispatch(\r\n        addBasketItemAsync({\r\n          productId: product?.id!,\r\n          quantity: updateQuantity,\r\n        })\r\n      );\r\n    } else {\r\n      const reduceQuantity = item.quantity - quantity;\r\n      dispatch(\r\n        removeBasketItemAsync({\r\n          productId: product?.id!,\r\n          quantity: reduceQuantity,\r\n        })\r\n      );\r\n    }\r\n  }\r\n\r\n  if (productStatus.includes(\"pending\"))\r\n    return <LoadingComponent message=\"Loading Product\" />;\r\n  if (!product) return <NotFound />;\r\n\r\n  return (\r\n    <Grid container spacing={6}>\r\n      <Grid item xs={6}>\r\n        <img\r\n          src={product.pictureUrl}\r\n          alt={product.name}\r\n          style={{\r\n            width: \"100%\",\r\n          }}\r\n        />\r\n      </Grid>\r\n      <Grid item xs={6}>\r\n        <Typography variant=\"h3\">{product.name}</Typography>\r\n        <Divider\r\n          sx={{\r\n            mb: \"2\",\r\n          }}\r\n        />\r\n        <Typography variant=\"h4\" color=\"secondary\">\r\n          ${(product.price / 100).toFixed(2)}\r\n        </Typography>\r\n        <TableContainer>\r\n          <Table>\r\n            <TableBody>\r\n              <TableRow>\r\n                <TableCell>Name</TableCell>\r\n                <TableCell>{product.name}</TableCell>\r\n              </TableRow>\r\n              <TableRow>\r\n                <TableCell>Description</TableCell>\r\n                <TableCell>{product.description}</TableCell>\r\n              </TableRow>\r\n              <TableRow>\r\n                <TableCell>Type</TableCell>\r\n                <TableCell>{product.type}</TableCell>\r\n              </TableRow>\r\n              <TableRow>\r\n                <TableCell>Brand</TableCell>\r\n                <TableCell>{product.brand}</TableCell>\r\n              </TableRow>\r\n              <TableRow>\r\n                <TableCell>Quantity In Stock</TableCell>\r\n                <TableCell>{product.quantityInStock}</TableCell>\r\n              </TableRow>\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n        <Grid container spacing={2}>\r\n          <Grid item xs={6}>\r\n            <TextField\r\n              onChange={handleInputChange}\r\n              variant=\"outlined\"\r\n              type=\"number\"\r\n              label=\"Quantity in Cart\"\r\n              fullWidth\r\n              value={quantity}\r\n            />\r\n          </Grid>\r\n          <Grid item xs={6}>\r\n            <LoadingButton\r\n              disabled={\r\n                item?.quantity === quantity || (!item && quantity === 0)\r\n              }\r\n              loading={status.includes(\"pending\")}\r\n              onClick={handleInputCart}\r\n              sx={{ height: \"55px\" }}\r\n              color=\"primary\"\r\n              size=\"large\"\r\n              variant=\"contained\"\r\n              fullWidth\r\n            >\r\n              {item ? \"Update Quantity\" : \"Add To Cart\"}\r\n            </LoadingButton>\r\n          </Grid>\r\n        </Grid>\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n}\r\n","import { Button, ButtonGroup, Typography } from \"@mui/material\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { useAppSelector } from \"../../app/store/configureStore\";\r\nimport { decrement, increment } from \"./counterSlice\";\r\n\r\nexport default function ContactPage() {\r\n  const dispatch = useDispatch();\r\n  const { data, title } = useAppSelector((state) => state.counter);\r\n\r\n  return (\r\n    <>\r\n      <Typography variant=\"h2\">{title}</Typography>\r\n      <Typography variant=\"h5\">The Data is: {data}</Typography>\r\n      <ButtonGroup>\r\n        <Button\r\n          onClick={() => dispatch(decrement(1))}\r\n          variant=\"contained\"\r\n          color=\"error\"\r\n        >\r\n          Decrement\r\n        </Button>\r\n        <Button\r\n          onClick={() => dispatch(increment(1))}\r\n          variant=\"contained\"\r\n          color=\"success\"\r\n        >\r\n          Increment\r\n        </Button>\r\n      </ButtonGroup>\r\n    </>\r\n  );\r\n}\r\n","import { Typography } from \"@mui/material\";\r\nimport { Box } from \"@mui/system\";\r\nimport Slider from \"react-slick\";\r\n\r\nexport default function HomePage() {\r\n  const settings = {\r\n    dots: true,\r\n    infinite: true,\r\n    speed: 500,\r\n    slidesToShow: 1,\r\n    slidesToScroll: 1,\r\n  };\r\n  return (\r\n    <>\r\n      <Slider {...settings}>\r\n        <div>\r\n          <img\r\n            src=\"/images/hero1.jpg\"\r\n            alt=\"hero\"\r\n            style={{ display: \"block\", width: \"100%\", maxHeight: 500 }}\r\n          />\r\n        </div>\r\n        <div>\r\n          <img\r\n            src=\"/images/hero2.jpg\"\r\n            alt=\"hero\"\r\n            style={{ display: \"block\", width: \"100%\", maxHeight: 500 }}\r\n          />\r\n        </div>\r\n        <div>\r\n          <img\r\n            src=\"/images/hero3.jpg\"\r\n            alt=\"hero\"\r\n            style={{ display: \"block\", width: \"100%\", maxHeight: 500 }}\r\n          />\r\n        </div>\r\n      </Slider>\r\n\r\n      <Box display=\"flex\" justifyContent=\"center\" sx={{ p: 4 }}>\r\n        <Typography variant=\"h1\">Welcome to the shop!</Typography>\r\n      </Box>\r\n    </>\r\n  );\r\n}\r\n","import { Fade, Menu, MenuItem } from \"@mui/material\";\r\nimport Button from \"@mui/material/Button/Button\";\r\nimport React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { signOut } from \"../../features/account/accountSlice\";\r\nimport { clearBasket } from \"../../features/basket/basketSlice\";\r\nimport { useAppDispatch, useAppSelector } from \"../store/configureStore\";\r\n\r\nexport default function SignedInMenu() {\r\n  const dispatch = useAppDispatch();\r\n  const user = useAppSelector((state) => state.account.user);\r\n  const [anchorEl, setAnchorEl] = React.useState<null | HTMLElement>(null);\r\n  const open = Boolean(anchorEl);\r\n  const handleClick = (event: any) => {\r\n    setAnchorEl(event.currentTarget);\r\n  };\r\n  const handleClose = () => {\r\n    setAnchorEl(null);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Button color=\"inherit\" onClick={handleClick} sx={{ typography: \"h6\" }}>\r\n        {user?.email}\r\n      </Button>\r\n      <Menu\r\n        anchorEl={anchorEl}\r\n        open={open}\r\n        onClose={handleClose}\r\n        TransitionComponent={Fade}\r\n      >\r\n        <MenuItem onClick={handleClose}>Profile</MenuItem>\r\n        <MenuItem component={Link} to=\"/orders\">\r\n          My Orders\r\n        </MenuItem>\r\n        <MenuItem\r\n          onClick={() => {\r\n            dispatch(signOut());\r\n            dispatch(clearBasket());\r\n          }}\r\n        >\r\n          Logout\r\n        </MenuItem>\r\n      </Menu>\r\n    </>\r\n  );\r\n}\r\n","import {\r\n  AppBar,\r\n  IconButton,\r\n  List,\r\n  ListItem,\r\n  Switch,\r\n  Toolbar,\r\n  Badge,\r\n  Box,\r\n  Typography,\r\n} from \"@mui/material\";\r\nimport { ShoppingCart } from \"@mui/icons-material\";\r\nimport { Link, NavLink } from \"react-router-dom\";\r\nimport { useAppSelector } from \"../store/configureStore\";\r\nimport SignedInMenu from \"./SignedInMenu\";\r\n\r\ninterface Props {\r\n  darkMode: boolean;\r\n  handleThemeChange: () => void;\r\n}\r\n\r\nconst midLinks = [\r\n  { title: \"catalog\", path: \"/catalog\" },\r\n  { title: \"contact\", path: \"/contact\" },\r\n  { title: \"about\", path: \"/about\" },\r\n];\r\n\r\nconst rightLinks = [\r\n  { title: \"login\", path: \"/login\" },\r\n  { title: \"register\", path: \"/register\" },\r\n];\r\n\r\nconst navStyles = {\r\n  color: \"inherit\",\r\n  textDecoration: \"none\",\r\n  typography: \"p\",\r\n  \"&:hover\": {\r\n    color: \"grey.500\",\r\n  },\r\n  \"&.active\": {\r\n    color: \"text.secondary\",\r\n  },\r\n};\r\n\r\nexport default function Header({ darkMode, handleThemeChange }: Props) {\r\n  const { basket } = useAppSelector((state) => state.basket);\r\n  const user = useAppSelector((state) => state.account.user);\r\n  const itemCount = basket?.items.reduce((sum, item) => sum + item.quantity, 0);\r\n\r\n  return (\r\n    <AppBar position=\"static\" sx={{ mb: 4 }}>\r\n      <Toolbar\r\n        sx={{\r\n          display: \"flex\",\r\n          justifyContent: \"space-between\",\r\n          alignItems: \"center\",\r\n        }}\r\n      >\r\n        <Box display=\"flex\" alignItems=\"center\">\r\n          <Typography variant=\"h6\" component={NavLink} to=\"/\" sx={navStyles}>\r\n            Re-Store\r\n          </Typography>\r\n          <Switch checked={darkMode} onChange={handleThemeChange} />\r\n        </Box>\r\n\r\n        <List sx={{ display: \"flex\" }}>\r\n          {midLinks.map(({ title, path }) => (\r\n            <ListItem component={NavLink} to={path} key={path} sx={navStyles}>\r\n              {title.toUpperCase()}\r\n            </ListItem>\r\n          ))}\r\n        </List>\r\n\r\n        <Box display=\"flex\" alignItems=\"center\">\r\n          <IconButton\r\n            component={Link}\r\n            to=\"/basket\"\r\n            size=\"large\"\r\n            sx={{ color: \"inherit\" }}\r\n          >\r\n            <Badge badgeContent={itemCount} color=\"secondary\">\r\n              <ShoppingCart />\r\n            </Badge>\r\n          </IconButton>\r\n          {user ? (\r\n            <SignedInMenu />\r\n          ) : (\r\n            <List sx={{ display: \"flex\" }}>\r\n              {rightLinks.map(({ title, path }) => (\r\n                <ListItem\r\n                  component={NavLink}\r\n                  to={path}\r\n                  key={path}\r\n                  sx={navStyles}\r\n                >\r\n                  {title.toUpperCase()}\r\n                </ListItem>\r\n              ))}\r\n            </List>\r\n          )}\r\n        </Box>\r\n      </Toolbar>\r\n    </AppBar>\r\n  );\r\n}\r\n","import {\r\n  TableContainer,\r\n  Paper,\r\n  Table,\r\n  TableBody,\r\n  TableRow,\r\n  TableCell,\r\n} from \"@mui/material\";\r\nimport { useAppSelector } from \"../../app/store/configureStore\";\r\nimport { currencyFormat } from \"../../app/util/util\";\r\n\r\ninterface Props {\r\n  subtotal?: number;\r\n}\r\n\r\nexport default function BasketSummary({ subtotal }: Props) {\r\n  const { basket } = useAppSelector((state) => state.basket);\r\n  if (subtotal === undefined)\r\n    subtotal =\r\n      basket?.items.reduce(\r\n        (sum, item) => sum + item.quantity * item.price,\r\n        0\r\n      ) ?? 0;\r\n  const deliveryFee = subtotal > 10000 ? 0 : 500;\r\n\r\n  return (\r\n    <>\r\n      <TableContainer component={Paper} variant={\"outlined\"}>\r\n        <Table>\r\n          <TableBody>\r\n            <TableRow>\r\n              <TableCell colSpan={2}>Subtotal</TableCell>\r\n              <TableCell align=\"right\">{currencyFormat(subtotal)}</TableCell>\r\n            </TableRow>\r\n            <TableRow>\r\n              <TableCell colSpan={2}>Delivery fee*</TableCell>\r\n              <TableCell align=\"right\">{currencyFormat(deliveryFee)}</TableCell>\r\n            </TableRow>\r\n            <TableRow>\r\n              <TableCell colSpan={2}>Total</TableCell>\r\n              <TableCell align=\"right\">\r\n                {currencyFormat(subtotal + deliveryFee)}\r\n              </TableCell>\r\n            </TableRow>\r\n            <TableRow>\r\n              <TableCell>\r\n                <span style={{ fontStyle: \"italic\" }}>\r\n                  *Orders over $100 qualify for free delivery\r\n                </span>\r\n              </TableCell>\r\n            </TableRow>\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n    </>\r\n  );\r\n}\r\n","import { Remove, Add, Delete } from \"@mui/icons-material\";\r\nimport { LoadingButton } from \"@mui/lab\";\r\nimport {\r\n  TableContainer,\r\n  Paper,\r\n  Table,\r\n  TableHead,\r\n  TableRow,\r\n  TableCell,\r\n  TableBody,\r\n  Box,\r\n} from \"@mui/material\";\r\nimport { BasketItem } from \"../../app/layout/models/basket\";\r\nimport { useAppDispatch, useAppSelector } from \"../../app/store/configureStore\";\r\nimport { currencyFormat } from \"../../app/util/util\";\r\nimport { removeBasketItemAsync, addBasketItemAsync } from \"./basketSlice\";\r\n\r\ninterface Props {\r\n  items: BasketItem[];\r\n  isBasket?: boolean;\r\n}\r\n\r\nexport default function BasketTable({ items, isBasket = true }: Props) {\r\n  const { status } = useAppSelector((state) => state.basket);\r\n  const dispatch = useAppDispatch();\r\n\r\n  return (\r\n    <TableContainer component={Paper}>\r\n      <Table sx={{ minWidth: 650 }} aria-label=\"simple table\">\r\n        <TableHead>\r\n          <TableRow>\r\n            <TableCell>Product</TableCell>\r\n            <TableCell align=\"right\">Price</TableCell>\r\n            <TableCell align=\"center\">Quantity</TableCell>\r\n            <TableCell align=\"right\">Subtotal</TableCell>\r\n            {isBasket && <TableCell align=\"right\"></TableCell>}\r\n          </TableRow>\r\n        </TableHead>\r\n        <TableBody>\r\n          {items.map((item: any) => (\r\n            <TableRow\r\n              key={item.productId}\r\n              sx={{ \"&:last-child td, &:last-child th\": { border: 0 } }}\r\n            >\r\n              <TableCell component=\"th\" scope=\"row\">\r\n                <Box display=\"flex\" alignItems=\"center\">\r\n                  <img\r\n                    src={item.pictureUrl}\r\n                    alt={item.name}\r\n                    style={{ height: 50, marginRight: 20 }}\r\n                  />\r\n                  <span>{item.name}</span>\r\n                </Box>\r\n              </TableCell>\r\n              <TableCell align=\"right\">{currencyFormat(item.price)}</TableCell>\r\n              <TableCell align=\"center\">\r\n                {isBasket && (\r\n                  <LoadingButton\r\n                    loading={\r\n                      status === \"pendingRemoveItem\" + item.productId + \"rem\"\r\n                    }\r\n                    onClick={() =>\r\n                      dispatch(\r\n                        removeBasketItemAsync({\r\n                          productId: item.productId,\r\n                          quantity: 1,\r\n                          name: \"rem\",\r\n                        })\r\n                      )\r\n                    }\r\n                    color=\"error\"\r\n                  >\r\n                    <Remove />\r\n                  </LoadingButton>\r\n                )}\r\n                {item.quantity}\r\n                {isBasket && (\r\n                  <LoadingButton\r\n                    loading={status === \"pendingAddItem\" + item.productId}\r\n                    onClick={() =>\r\n                      dispatch(\r\n                        addBasketItemAsync({ productId: item.productId })\r\n                      )\r\n                    }\r\n                    color=\"secondary\"\r\n                  >\r\n                    <Add />\r\n                  </LoadingButton>\r\n                )}\r\n              </TableCell>\r\n              <TableCell align=\"right\">\r\n                $ {((item.price * item.quantity) / 100).toFixed(2)}\r\n              </TableCell>\r\n              {isBasket && (\r\n                <TableCell align=\"right\">\r\n                  <LoadingButton\r\n                    loading={\r\n                      status === \"pendingRemoveItem\" + item.productId + \"del\"\r\n                    }\r\n                    onClick={() =>\r\n                      dispatch(\r\n                        removeBasketItemAsync({\r\n                          productId: item.productId,\r\n                          quantity: item.quantity,\r\n                          name: \"del\",\r\n                        })\r\n                      )\r\n                    }\r\n                    color=\"error\"\r\n                  >\r\n                    <Delete />\r\n                  </LoadingButton>\r\n                </TableCell>\r\n              )}\r\n            </TableRow>\r\n          ))}\r\n        </TableBody>\r\n      </Table>\r\n    </TableContainer>\r\n  );\r\n}\r\n","import { Typography, Grid, Button } from \"@mui/material\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { useAppSelector } from \"../../app/store/configureStore\";\r\nimport BasketSummary from \"./BasketSummary\";\r\nimport BasketTable from \"./BasketTable\";\r\n\r\nexport default function BasketPage() {\r\n  const { basket } = useAppSelector((state) => state.basket);\r\n\r\n  if (!basket)\r\n    return <Typography variant=\"h3\">Your basket is empty</Typography>;\r\n\r\n  return (\r\n    <>\r\n      <BasketTable items={basket.items} />\r\n      <Grid container>\r\n        <Grid item xs={6} />\r\n        <Grid item xs={6}>\r\n          <BasketSummary />\r\n          <Button\r\n            component={Link}\r\n            to=\"/checkout\"\r\n            variant=\"contained\"\r\n            size=\"large\"\r\n            fullWidth\r\n          >\r\n            Checkout\r\n          </Button>\r\n        </Grid>\r\n      </Grid>\r\n    </>\r\n  );\r\n}\r\n","import Avatar from \"@mui/material/Avatar\";\r\nimport TextField from \"@mui/material/TextField\";\r\nimport Grid from \"@mui/material/Grid\";\r\nimport Box from \"@mui/material/Box\";\r\nimport LockOutlinedIcon from \"@mui/icons-material/LockOutlined\";\r\nimport Typography from \"@mui/material/Typography\";\r\nimport Container from \"@mui/material/Container\";\r\nimport { Paper } from \"@mui/material\";\r\nimport { Link, useHistory, useLocation } from \"react-router-dom\";\r\nimport { FieldValues, useForm } from \"react-hook-form\";\r\nimport { LoadingButton } from \"@mui/lab\";\r\nimport { useAppDispatch } from \"../../app/store/configureStore\";\r\nimport { signInUser } from \"./accountSlice\";\r\n\r\nexport default function Login() {\r\n  const history = useHistory();\r\n  const location = useLocation<any>();\r\n  const dispatch = useAppDispatch();\r\n  const {\r\n    register,\r\n    handleSubmit,\r\n    formState: { isSubmitting, errors, isValid },\r\n  } = useForm({\r\n    mode: \"all\",\r\n  });\r\n\r\n  async function submitForm(data: FieldValues) {\r\n    try {\r\n      await dispatch(signInUser(data));\r\n      history.push(location.state?.from?.pathname || \"/catalog\");\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Container\r\n      component={Paper}\r\n      maxWidth=\"sm\"\r\n      sx={{\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        alignItems: \"center\",\r\n        p: 4,\r\n      }}\r\n    >\r\n      <Avatar sx={{ m: 1, bgcolor: \"secondary.main\" }}>\r\n        <LockOutlinedIcon />\r\n      </Avatar>\r\n      <Typography component=\"h1\" variant=\"h5\">\r\n        Sign in\r\n      </Typography>\r\n      <Box\r\n        component=\"form\"\r\n        onSubmit={handleSubmit(submitForm)}\r\n        noValidate\r\n        sx={{ mt: 1 }}\r\n      >\r\n        <TextField\r\n          margin=\"normal\"\r\n          fullWidth\r\n          label=\"Username\"\r\n          autoFocus\r\n          {...register(\"username\", { required: \"Username is required\" })}\r\n          error={!!errors.username}\r\n          helperText={errors?.username?.message}\r\n        />\r\n        <TextField\r\n          margin=\"normal\"\r\n          fullWidth\r\n          label=\"Password\"\r\n          type=\"password\"\r\n          {...register(\"password\", {\r\n            required: \"Password is required\",\r\n            min: 4,\r\n          })}\r\n          error={!!errors.password}\r\n          helperText={errors?.password?.message}\r\n        />\r\n        <LoadingButton\r\n          disabled={!isValid}\r\n          loading={isSubmitting}\r\n          type=\"submit\"\r\n          fullWidth\r\n          variant=\"contained\"\r\n          sx={{ mt: 3, mb: 2 }}\r\n        >\r\n          Sign In\r\n        </LoadingButton>\r\n        <Grid container>\r\n          <Grid item>\r\n            <Link to=\"/register\">{\"Don't have an account? Sign Up\"}</Link>\r\n          </Grid>\r\n        </Grid>\r\n      </Box>\r\n    </Container>\r\n  );\r\n}\r\n","import Avatar from \"@mui/material/Avatar\";\r\nimport TextField from \"@mui/material/TextField\";\r\nimport Grid from \"@mui/material/Grid\";\r\nimport Box from \"@mui/material/Box\";\r\nimport LockOutlinedIcon from \"@mui/icons-material/LockOutlined\";\r\nimport Typography from \"@mui/material/Typography\";\r\nimport Container from \"@mui/material/Container\";\r\nimport {\r\n  Paper,\r\n} from \"@mui/material\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { LoadingButton } from \"@mui/lab\";\r\nimport agent from \"../../app/api/agent\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nexport default function Register() {\r\n  const history = useHistory();\r\n\r\n  const {\r\n    register,\r\n    handleSubmit,\r\n    setError,\r\n    formState: { isSubmitting, errors, isValid },\r\n  } = useForm({\r\n    mode: \"all\",\r\n  });\r\n\r\n  function handleApiErrors(errors: any) {\r\n    if (errors) {\r\n      errors.forEach((error: string) => {\r\n        if (error.includes(\"Password\")) {\r\n          setError(\"password\", { message: error });\r\n        } else if (error.includes(\"Email\")) {\r\n          setError(\"email\", { message: error });\r\n        } else if (error.includes(\"Username\")) {\r\n          setError(\"username\", { message: error });\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Container\r\n      component={Paper}\r\n      maxWidth=\"sm\"\r\n      sx={{\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        alignItems: \"center\",\r\n        p: 4,\r\n      }}\r\n    >\r\n      <Avatar sx={{ m: 1, bgcolor: \"secondary.main\" }}>\r\n        <LockOutlinedIcon />\r\n      </Avatar>\r\n      <Typography component=\"h1\" variant=\"h5\">\r\n        Register\r\n      </Typography>\r\n      <Box\r\n        component=\"form\"\r\n        noValidate\r\n        sx={{ mt: 1 }}\r\n        onSubmit={handleSubmit((data) =>\r\n          agent.Account.register(data)\r\n            .then(() => {\r\n              toast.success(\"Register Success - you can login now\");\r\n              history.push(\"/login\");\r\n            })\r\n            .catch((error) => handleApiErrors(error))\r\n        )}\r\n      >\r\n        <TextField\r\n          margin=\"normal\"\r\n          fullWidth\r\n          label=\"Username\"\r\n          autoFocus\r\n          {...register(\"username\", { required: \"Username is required\" })}\r\n          error={!!errors.username}\r\n          helperText={errors?.username?.message}\r\n        />\r\n        <TextField\r\n          margin=\"normal\"\r\n          fullWidth\r\n          label=\"Email address\"\r\n          {...register(\"email\", {\r\n            required: \"Email is required\",\r\n            pattern: {\r\n              value: /^\\w+[\\w-.]*@\\w+((-\\w+)|(\\w*))\\.[a-z]{2,3}$/,\r\n              message: \"Not valid email address\",\r\n            },\r\n          })}\r\n          error={!!errors.email}\r\n          helperText={errors?.email?.message}\r\n        />\r\n        <TextField\r\n          margin=\"normal\"\r\n          fullWidth\r\n          label=\"Password\"\r\n          type=\"password\"\r\n          {...register(\"password\", {\r\n            required: \"Password is required\",\r\n            min: 4,\r\n            pattern: {\r\n              value:\r\n                /(?=^.{6,10}$)(?=.*\\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[!@#$%^&amp;*()_+}{&quot;:;'?/&gt;.&lt;,])(?!.*\\s).*$/,\r\n              message: \"password does not meet complexity requirement\",\r\n            },\r\n          })}\r\n          error={!!errors.password}\r\n          helperText={errors?.password?.message}\r\n        />\r\n        <LoadingButton\r\n          disabled={!isValid}\r\n          loading={isSubmitting}\r\n          type=\"submit\"\r\n          fullWidth\r\n          variant=\"contained\"\r\n          sx={{ mt: 3, mb: 2 }}\r\n        >\r\n          Register\r\n        </LoadingButton>\r\n        <Grid container>\r\n          <Grid item>\r\n            <Link to=\"/login\">{\"Have an account? Sign In\"}</Link>\r\n          </Grid>\r\n        </Grid>\r\n      </Box>\r\n    </Container>\r\n  );\r\n}\r\n","import { ComponentType } from \"react\";\r\nimport {\r\n  Redirect,\r\n  Route,\r\n  RouteComponentProps,\r\n  RouteProps,\r\n} from \"react-router-dom\";\r\nimport { useAppSelector } from \"../store/configureStore\";\r\n\r\ninterface Props extends RouteProps {\r\n  component: ComponentType<RouteComponentProps<any>> | ComponentType<any>;\r\n}\r\n\r\nexport default function PrivateRoute({ component: Component, ...rest }: Props) {\r\n  const { user } = useAppSelector((state) => state.account);\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={(props) =>\r\n        user ? (\r\n          <Component {...props} />\r\n        ) : (\r\n          <Redirect\r\n            to={{\r\n              pathname: \"/login\",\r\n              state: { from: props.location },\r\n            }}\r\n          />\r\n        )\r\n      }\r\n    />\r\n  );\r\n}\r\n","import { Box, Button, Grid, Typography } from \"@mui/material\";\r\nimport { BasketItem } from \"../../app/layout/models/basket\";\r\nimport { Order } from \"../../app/layout/models/order\";\r\nimport BasketSummary from \"../basket/BasketSummary\";\r\nimport BasketTable from \"../basket/BasketTable\";\r\n\r\ninterface Props {\r\n  order: Order;\r\n  setSelectedOrder: (id: number) => void;\r\n}\r\n\r\nexport default function OrderDetails({ order, setSelectedOrder }: Props) {\r\n  const subtotal =\r\n    order.orderItems.reduce(\r\n      (sum, item) => sum + item.quantity * item.price,\r\n      0\r\n    ) ?? 0;\r\n  return (\r\n    <>\r\n      <Box display=\"flex\" justifyContent=\"center\">\r\n        <Typography sx={{ p: 2 }} gutterBottom variant=\"h4\">\r\n          Your Order Number is:  {order.id}{\" \"}\r\n        </Typography>\r\n        <Button\r\n          onClick={() => setSelectedOrder(0)}\r\n          sx={{ m: 2 }}\r\n          size=\"large\"\r\n          variant=\"contained\"\r\n        > Back To Orders </Button>\r\n      </Box>\r\n      <BasketTable items={order.orderItems as BasketItem[]} isBasket={false} />\r\n      <Grid container>\r\n        <Grid item xs={6} />\r\n        <Grid item xs={6}>\r\n          <BasketSummary subtotal={subtotal} />\r\n        </Grid>\r\n      </Grid>\r\n    </>\r\n  );\r\n}\r\n","import {\r\n  TableContainer,\r\n  Paper,\r\n  Table,\r\n  TableHead,\r\n  TableRow,\r\n  TableCell,\r\n  TableBody,\r\n  Button,\r\n} from \"@mui/material\";\r\nimport { useEffect, useState } from \"react\";\r\nimport agent from \"../../app/api/agent\";\r\nimport LoadingComponent from \"../../app/layout/LoadingComponent\";\r\nimport { Order } from \"../../app/layout/models/order\";\r\nimport { currencyFormat } from \"../../app/util/util\";\r\nimport OrderDetails from \"./OrderDetails\";\r\n\r\nexport default function Orders() {\r\n  const [orders, setOrders] = useState<Order[] | null>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [selectedOrderNumber, setSelectedOrderNumber] = useState(0);\r\n\r\n  useEffect(() => {\r\n    agent.Orders.list()\r\n      .then((orders) => setOrders(orders))\r\n      .catch((err) => console.log(err.message))\r\n      .finally(() => setLoading(false));\r\n  }, []);\r\n\r\n  if (loading) return <LoadingComponent message=\"Loading Orders...\" />;\r\n\r\n  if (selectedOrderNumber > 0)\r\n    return (\r\n      <OrderDetails\r\n        order={orders?.find((o) => o.id === selectedOrderNumber)!}\r\n        setSelectedOrder={setSelectedOrderNumber}\r\n      />\r\n    );\r\n\r\n  return (\r\n    <TableContainer component={Paper}>\r\n      <Table sx={{ minWidth: 650 }} aria-label=\"simple table\">\r\n        <TableHead>\r\n          <TableRow>\r\n            <TableCell>Order Number</TableCell>\r\n            <TableCell align=\"right\">Total</TableCell>\r\n            <TableCell align=\"right\">Order Date</TableCell>\r\n            <TableCell align=\"right\">Order Status</TableCell>\r\n            <TableCell align=\"right\"></TableCell>\r\n          </TableRow>\r\n        </TableHead>\r\n        <TableBody>\r\n          {orders?.map((order) => (\r\n            <TableRow\r\n              key={order.id}\r\n              sx={{ \"&:last-child td, &:last-child th\": { border: 0 } }}\r\n            >\r\n              <TableCell component=\"th\" scope=\"row\">\r\n                {order.id}\r\n              </TableCell>\r\n              <TableCell align=\"right\">{currencyFormat(order.total)}</TableCell>\r\n              <TableCell align=\"right\">\r\n                {order.orderDate.split(\"T\")[0]}\r\n              </TableCell>\r\n              <TableCell align=\"right\">{order.orderStatus}</TableCell>\r\n              <TableCell align=\"right\">\r\n                <Button onClick={() => setSelectedOrderNumber(order.id)}>\r\n                  View\r\n                </Button>\r\n              </TableCell>\r\n            </TableRow>\r\n          ))}\r\n        </TableBody>\r\n      </Table>\r\n    </TableContainer>\r\n  );\r\n}\r\n","import { TextField } from \"@mui/material\";\r\nimport { useController, UseControllerProps } from \"react-hook-form\";\r\n\r\ninterface Props extends UseControllerProps {\r\n  label: string;\r\n}\r\n\r\nexport default function AppTextInput(props: Props) {\r\n  const { fieldState, field } = useController({ ...props, defaultValue: \"\" });\r\n\r\n  return (\r\n    <TextField\r\n      {...props}\r\n      {...field}\r\n      fullWidth\r\n      variant=\"outlined\"\r\n      error={!!fieldState.error}\r\n      helperText={fieldState.error?.message}\r\n    />\r\n  );\r\n}\r\n","import { Checkbox, FormControlLabel } from \"@mui/material\";\r\nimport { useController, UseControllerProps } from \"react-hook-form\";\r\n\r\ninterface Props extends UseControllerProps {\r\n  label: string;\r\n  disabled: boolean;\r\n}\r\n\r\nexport default function AppCheckBox(props: Props) {\r\n  const { field } = useController({ ...props, defaultValue: false });\r\n  return (\r\n    <FormControlLabel\r\n      control={\r\n        <Checkbox\r\n          {...field}\r\n          checked={field.value}\r\n          color=\"secondary\"\r\n          disabled={props.disabled}\r\n        />\r\n      }\r\n      label={props.label}\r\n    />\r\n  );\r\n}\r\n","import Grid from \"@mui/material/Grid\";\r\nimport Typography from \"@mui/material/Typography\";\r\nimport { useFormContext } from \"react-hook-form\";\r\nimport AppTextInput from \"../../app/components/AppTextInput\";\r\nimport AppCheckBox from \"./AppCheckBox\";\r\n\r\nexport default function AddressForm() {\r\n  const { control, formState } = useFormContext();\r\n\r\n  return (\r\n    <>\r\n      <Typography variant=\"h6\" gutterBottom>\r\n        Shipping address\r\n      </Typography>\r\n      <Grid container spacing={3}>\r\n        <Grid item xs={12} sm={12}>\r\n          <AppTextInput control={control} name=\"fullName\" label=\"Full Name\" />\r\n        </Grid>\r\n        <Grid item xs={12}>\r\n          <AppTextInput control={control} name=\"address1\" label=\"Address 1\" />\r\n        </Grid>\r\n        <Grid item xs={12}>\r\n          <AppTextInput control={control} name=\"address2\" label=\"Address 2\" />\r\n        </Grid>\r\n        <Grid item xs={12} sm={6}>\r\n          <AppTextInput control={control} name=\"city\" label=\"City\" />\r\n        </Grid>\r\n\r\n        <Grid item xs={12} sm={6}>\r\n          <AppTextInput\r\n            control={control}\r\n            name=\"state\"\r\n            label=\"Province Or Region\"\r\n          />\r\n        </Grid>\r\n        <Grid item xs={12} sm={6}>\r\n          <AppTextInput control={control} name=\"zip\" label=\"Zip Code\" />\r\n        </Grid>\r\n        <Grid item xs={12} sm={6}>\r\n          <AppTextInput control={control} name=\"country\" label=\"Country\" />\r\n        </Grid>\r\n        <Grid item xs={12}>\r\n          <AppCheckBox\r\n            disabled={!formState.isDirty}\r\n            name=\"saveAddress\"\r\n            label=\"Save this as default order address\"\r\n            control={control}\r\n          />\r\n        </Grid>\r\n      </Grid>\r\n    </>\r\n  );\r\n}\r\n","import { InputBaseComponentProps } from \"@mui/material\";\r\nimport { forwardRef, Ref, useImperativeHandle, useRef } from \"react\";\r\n\r\ninterface Props extends InputBaseComponentProps {}\r\n\r\nexport const StripeInput = forwardRef(function StripeInput(\r\n  { component: Component, ...props }: Props,\r\n  ref: Ref<unknown>\r\n) {\r\n  const elementRef = useRef<any>();\r\n\r\n  useImperativeHandle(ref, () => ({\r\n    focus: () => elementRef.current.focus,\r\n  }));\r\n\r\n  return (\r\n    <Component\r\n      onReady={(element: any) => (elementRef.current = element)}\r\n      {...props}\r\n    />\r\n  );\r\n});\r\n","import Typography from \"@mui/material/Typography\";\r\nimport Grid from \"@mui/material/Grid\";\r\nimport TextField from \"@mui/material/TextField\";\r\nimport FormControlLabel from \"@mui/material/FormControlLabel\";\r\nimport Checkbox from \"@mui/material/Checkbox\";\r\nimport { useFormContext } from \"react-hook-form\";\r\nimport AppTextInput from \"../../app/components/AppTextInput\";\r\nimport {\r\n  CardCvcElement,\r\n  CardExpiryElement,\r\n  CardNumberElement,\r\n} from \"@stripe/react-stripe-js\";\r\nimport { StripeInput } from \"./StripeInput\";\r\nimport { StripeElementType } from \"@stripe/stripe-js\";\r\n\r\ninterface Props {\r\n  cardState: { elementError: { [key in StripeElementType]?: string } };\r\n  onCardInputChange: (event: any) => void;\r\n}\r\n\r\nexport default function PaymentForm({ cardState, onCardInputChange }: Props) {\r\n  const { control } = useFormContext();\r\n\r\n  return (\r\n    <>\r\n      <Typography variant=\"h6\" gutterBottom>\r\n        Payment method\r\n      </Typography>\r\n      <Grid container spacing={3}>\r\n        <Grid item xs={12} md={6}>\r\n          <AppTextInput\r\n            name=\"nameOnCard\"\r\n            label=\"Name on card\"\r\n            control={control}\r\n          />\r\n        </Grid>\r\n        <Grid item xs={12} md={6}>\r\n          <TextField\r\n            onChange={onCardInputChange}\r\n            error={!!cardState.elementError.cardNumber}\r\n            helperText={cardState.elementError.cardNumber}\r\n            id=\"cardNumber\"\r\n            name=\"cardNumber\"\r\n            label=\"Card number\"\r\n            fullWidth\r\n            autoComplete=\"cc-number\"\r\n            variant=\"outlined\"\r\n            InputLabelProps={{ shrink: true }}\r\n            InputProps={{\r\n              inputComponent: StripeInput,\r\n              inputProps: {\r\n                component: CardNumberElement,\r\n              },\r\n            }}\r\n          />\r\n        </Grid>\r\n        <Grid item xs={12} md={6}>\r\n          <TextField\r\n            onChange={onCardInputChange}\r\n            error={!!cardState.elementError.cardExpiry}\r\n            helperText={cardState.elementError.cardExpiry}\r\n            id=\"expDate\"\r\n            label=\"Expiry date\"\r\n            fullWidth\r\n            autoComplete=\"cc-exp\"\r\n            variant=\"outlined\"\r\n            InputLabelProps={{ shrink: true }}\r\n            InputProps={{\r\n              inputComponent: StripeInput,\r\n              inputProps: {\r\n                component: CardExpiryElement,\r\n              },\r\n            }}\r\n          />\r\n        </Grid>\r\n        <Grid item xs={12} md={6}>\r\n          <TextField\r\n            onChange={onCardInputChange}\r\n            error={!!cardState.elementError.cardCvc}\r\n            helperText={cardState.elementError.cardCvc}\r\n            id=\"cvv\"\r\n            label=\"CVV\"\r\n            fullWidth\r\n            autoComplete=\"cc-csc\"\r\n            variant=\"outlined\"\r\n            InputLabelProps={{ shrink: true }}\r\n            InputProps={{\r\n              inputComponent: StripeInput,\r\n              inputProps: {\r\n                component: CardCvcElement,\r\n              },\r\n            }}\r\n          />\r\n        </Grid>\r\n        <Grid item xs={12}>\r\n          <FormControlLabel\r\n            control={<Checkbox color=\"secondary\" name=\"saveCard\" value=\"yes\" />}\r\n            label=\"Remember credit card details for next time\"\r\n          />\r\n        </Grid>\r\n      </Grid>\r\n    </>\r\n  );\r\n}\r\n","import Typography from \"@mui/material/Typography\";\r\nimport Grid from \"@mui/material/Grid\";\r\nimport { useAppSelector } from \"../../app/store/configureStore\";\r\nimport BasketTable from \"../basket/BasketTable\";\r\nimport BasketSummary from \"../basket/BasketSummary\";\r\n\r\nexport default function Review() {\r\n  const { basket } = useAppSelector((state) => state.basket);\r\n\r\n  return (\r\n    <>\r\n      <Typography variant=\"h6\" gutterBottom>\r\n        Order summary\r\n      </Typography>\r\n      {basket && <BasketTable items={basket?.items} isBasket={false} />}\r\n      <Grid container>\r\n        <Grid item xs={6} />\r\n        <Grid item xs={6}>\r\n          <BasketSummary />\r\n        </Grid>\r\n      </Grid>\r\n    </>\r\n  );\r\n}\r\n","import * as yup from \"yup\";\r\n\r\nexport const validationSchema = [\r\n  yup.object({\r\n    fullName: yup.string().required(\"Full Name uis required\"),\r\n    address1: yup.string().required(\"Address 1  is required\"),\r\n    address2: yup.string().required(\"Address 2 is required\"),\r\n    city: yup.string().required(),\r\n    state: yup.string().required(),\r\n    zip: yup.string().required(),\r\n    country: yup.string().required(),\r\n  }),\r\n  yup.object(),\r\n  yup.object({\r\n    nameOnCard: yup.string().required(),\r\n  }),\r\n];\r\n","import {\r\n  Box,\r\n  Button,\r\n  Paper,\r\n  Step,\r\n  StepLabel,\r\n  Stepper,\r\n  Typography,\r\n} from \"@mui/material\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { FieldValues, FormProvider, useForm } from \"react-hook-form\";\r\nimport AddressForm from \"./AddressForm\";\r\nimport PaymentForm from \"./PaymentForm\";\r\nimport Review from \"./Review\";\r\nimport { yupResolver } from \"@hookform/resolvers/yup\";\r\nimport { validationSchema } from \"./CheckoutValidation\";\r\nimport agent from \"../../app/api/agent\";\r\nimport { useAppDispatch, useAppSelector } from \"../../app/store/configureStore\";\r\nimport { clearBasket } from \"../basket/basketSlice\";\r\nimport { LoadingButton } from \"@mui/lab\";\r\nimport { StripeElementType } from \"@stripe/stripe-js\";\r\nimport {\r\n  CardNumberElement,\r\n  useElements,\r\n  useStripe,\r\n} from \"@stripe/react-stripe-js\";\r\n\r\nconst steps = [\"Shipping address\", \"Review your order\", \"Payment details\"];\r\n\r\nexport default function CheckoutPage() {\r\n  const [activeStep, setActiveStep] = useState(0);\r\n  const [orderNumber, setOrderNumber] = useState(0);\r\n  const [loading, setLoading] = useState(false);\r\n  const dispatch = useAppDispatch();\r\n  const [cardState, setCardState] = useState<{\r\n    elementError: { [key in StripeElementType]?: string };\r\n  }>({ elementError: {} });\r\n  const [cardComplete, setCardComplete] = useState<any>({\r\n    cardNumber: false,\r\n    cardExpiry: false,\r\n    cardCvc: false,\r\n  });\r\n  const [paymentMessage, setPaymentMessage] = useState(\"\");\r\n  const [paymentSucceeded, setPaymentSucceeded] = useState(false);\r\n  const { basket } = useAppSelector((state) => state.basket);\r\n  const stripe = useStripe();\r\n  const elements = useElements();\r\n\r\n  function onCardInput(event: any) {\r\n    setCardState({\r\n      ...cardState,\r\n      elementError: {\r\n        ...cardState.elementError,\r\n        [event.elementType]: event.error?.message,\r\n      },\r\n    });\r\n\r\n    setCardComplete({ ...cardComplete, [event.elementType]: event.complete });\r\n  }\r\n\r\n  function getStepContent(step: number) {\r\n    switch (step) {\r\n      case 0:\r\n        return <AddressForm />;\r\n      case 1:\r\n        return <Review />;\r\n      case 2:\r\n        return (\r\n          <PaymentForm cardState={cardState} onCardInputChange={onCardInput} />\r\n        );\r\n      default:\r\n        throw new Error(\"Unknown step\");\r\n    }\r\n  }\r\n\r\n  const currentValidationSchema = validationSchema[activeStep];\r\n\r\n  const methods = useForm({\r\n    mode: \"all\",\r\n    resolver: yupResolver(currentValidationSchema),\r\n  });\r\n\r\n  useEffect(() => {\r\n    agent.Account.fetchAddress().then((response) => {\r\n      if (response) {\r\n        methods.reset({\r\n          ...methods.getValues(),\r\n          ...response,\r\n          saveAddress: false,\r\n        });\r\n      }\r\n    });\r\n  }, [methods]);\r\n\r\n  async function submitOrder(data: FieldValues) {\r\n    setLoading(true);\r\n    const { nameOnCard, saveAddress, ...shippingAddress } = data;\r\n    if (!stripe || !elements) return; // Stripe is not ready\r\n    try {\r\n      const cardElement = elements.getElement(CardNumberElement);\r\n      const paymentResult = await stripe.confirmCardPayment(\r\n        basket?.clientSecret!,\r\n        {\r\n          payment_method: {\r\n            card: cardElement!,\r\n            billing_details: {\r\n              name: nameOnCard,\r\n            },\r\n          },\r\n        }\r\n      );\r\n      if (paymentResult.paymentIntent?.status === \"succeeded\") {\r\n        const orderNumber = await agent.Orders.create({\r\n          saveAddress,\r\n          shippingAddress,\r\n        });\r\n        setOrderNumber(orderNumber);\r\n        setPaymentSucceeded(true);\r\n        setPaymentMessage(\"Thanks for the order - we have recived the payment\");\r\n        setActiveStep(activeStep + 1);\r\n        dispatch(clearBasket());\r\n        setLoading(false);\r\n      } else {\r\n        setPaymentMessage(paymentResult.error?.message!);\r\n        setPaymentSucceeded(false);\r\n        setLoading(false);\r\n        setActiveStep(activeStep + 1);\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  const handleNext = async (data: FieldValues) => {\r\n    if (activeStep === steps.length - 1) {\r\n      await submitOrder(data);\r\n    } else {\r\n      setActiveStep(activeStep + 1);\r\n    }\r\n  };\r\n\r\n  const handleBack = () => {\r\n    setActiveStep(activeStep - 1);\r\n  };\r\n\r\n  function submitDisable(): boolean {\r\n    if (activeStep === steps.length - 1) {\r\n      return (\r\n        !cardComplete.cardCvc ||\r\n        !cardComplete.cardExpiry ||\r\n        !cardComplete.cardNumber ||\r\n        !methods.formState.isValid\r\n      );\r\n    } else {\r\n      return !methods.formState.isValid;\r\n    }\r\n  }\r\n\r\n  return (\r\n    <FormProvider {...methods}>\r\n      <Paper\r\n        variant=\"outlined\"\r\n        sx={{ my: { xs: 3, md: 6 }, p: { xs: 2, md: 3 } }}\r\n      >\r\n        <Typography component=\"h1\" variant=\"h4\" align=\"center\">\r\n          Checkout\r\n        </Typography>\r\n        <Stepper activeStep={activeStep} sx={{ pt: 3, pb: 5 }}>\r\n          {steps.map((label) => (\r\n            <Step key={label}>\r\n              <StepLabel>{label}</StepLabel>\r\n            </Step>\r\n          ))}\r\n        </Stepper>\r\n        <>\r\n          {activeStep === steps.length ? (\r\n            <>\r\n              <Typography variant=\"h5\" gutterBottom>\r\n                {paymentMessage}\r\n              </Typography>\r\n              {paymentSucceeded ? (\r\n                <Typography variant=\"subtitle1\">\r\n                  Your order number is #{orderNumber}. We have emailed your\r\n                  order confirmation, and will send you an update when your\r\n                  order has shipped.\r\n                </Typography>\r\n              ) : (\r\n                <Button variant=\"contained\" onClick={handleBack}>\r\n                  Go Back and Try Again\r\n                </Button>\r\n              )}\r\n            </>\r\n          ) : (\r\n            <form onSubmit={methods.handleSubmit(handleNext)}>\r\n              {getStepContent(activeStep)}\r\n              <Box sx={{ display: \"flex\", justifyContent: \"flex-end\" }}>\r\n                {activeStep !== 0 && (\r\n                  <Button onClick={handleBack} sx={{ mt: 3, ml: 1 }}>\r\n                    Back\r\n                  </Button>\r\n                )}\r\n                <LoadingButton\r\n                  loading={loading}\r\n                  disabled={submitDisable()}\r\n                  variant=\"contained\"\r\n                  type=\"submit\"\r\n                  sx={{ mt: 3, ml: 1 }}\r\n                >\r\n                  {activeStep === steps.length - 1 ? \"Place order\" : \"Next\"}\r\n                </LoadingButton>\r\n              </Box>\r\n            </form>\r\n          )}\r\n        </>\r\n      </Paper>\r\n    </FormProvider>\r\n  );\r\n}\r\n","import { Elements } from \"@stripe/react-stripe-js\";\r\nimport { loadStripe } from \"@stripe/stripe-js\";\r\nimport { useEffect, useState } from \"react\";\r\nimport agent from \"../../app/api/agent\";\r\nimport LoadingComponent from \"../../app/layout/LoadingComponent\";\r\nimport { useAppDispatch } from \"../../app/store/configureStore\";\r\nimport { setBasket } from \"../basket/basketSlice\";\r\nimport CheckoutPage from \"./CheckoutPage\";\r\n\r\nconst stripePermise = loadStripe(\r\n  \"pk_test_51L9rBoH3TO4CUc7Ttb4qbZCqMnKXO3Th8ovbUXTK3S4vk0dYvEJZUceam5zQPvaZpd3F0tsrP4cYb3KoZWzpxNUo00GXwPRZ3t\"\r\n);\r\n\r\nexport default function CheckoutWrapper() {\r\n  const dispatch = useAppDispatch();\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    agent.Payments.createPaymentIntent()\r\n      .then((basket) => dispatch(setBasket(basket)))\r\n      .catch((error) => console.log(error.message))\r\n      .finally(() => setLoading(false));\r\n  }, [dispatch]);\r\n\r\n  if (loading) return <LoadingComponent message=\"Loading...\" />;\r\n\r\n  return (\r\n    <Elements stripe={stripePermise}>\r\n      <CheckoutPage />\r\n    </Elements>\r\n  );\r\n}\r\n","import { ThemeProvider } from \"@emotion/react\";\r\nimport { Container, createTheme, CssBaseline } from \"@mui/material\";\r\nimport { useCallback, useEffect, useState } from \"react\";\r\nimport { Route, Switch } from \"react-router-dom\";\r\nimport { ToastContainer } from \"react-toastify\";\r\nimport AboutPage from \"../../features/about/AboutPage\";\r\nimport Catalog from \"../../features/catalog/Catalog\";\r\nimport ProductDetails from \"../../features/catalog/ProductDetails\";\r\nimport ContactPage from \"../../features/contact/ContactPage\";\r\nimport HomePage from \"../../features/home/HomePage\";\r\nimport Header from \"./Header\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport NotFound from \"../errors/NotFound\";\r\nimport BasketPage from \"../../features/basket/BasketPage\";\r\nimport LoadingComponent from \"./LoadingComponent\";\r\nimport { fetchBasketAsync } from \"../../features/basket/basketSlice\";\r\nimport Login from \"../../features/account/Login\";\r\nimport Register from \"../../features/account/Register\";\r\nimport { fetchCurrentUser } from \"../../features/account/accountSlice\";\r\nimport { useAppDispatch } from \"../store/configureStore\";\r\nimport PrivateRoute from \"./PrivateRoute\";\r\nimport Orders from \"../../features/order/Orders\";\r\nimport CheckoutWrapper from \"../../features/checkout/CheckoutWrapper\";\r\n\r\nfunction App() {\r\n  const dispatch = useAppDispatch();\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  const initApp = useCallback(async () => {\r\n    try {\r\n      await dispatch(fetchCurrentUser());\r\n      await dispatch(fetchBasketAsync());\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }, [dispatch]);\r\n\r\n  useEffect(() => {\r\n    initApp().then(() => setLoading(false));\r\n  }, [initApp]);\r\n\r\n  const [darkMode, setdarkMode] = useState(false);\r\n  const paletteType = darkMode ? \"dark\" : \"light\";\r\n\r\n  const theme = createTheme({\r\n    palette: {\r\n      mode: paletteType,\r\n      background: {\r\n        default: paletteType === \"light\" ? \"#eaeaea\" : \"#121212\",\r\n      },\r\n    },\r\n  });\r\n\r\n  function handleThemeChange() {\r\n    setdarkMode(!darkMode);\r\n  }\r\n\r\n  if (loading) return <LoadingComponent message=\"Initilizing App..\" />;\r\n\r\n  return (\r\n    <ThemeProvider theme={theme}>\r\n      <ToastContainer theme=\"colored\" position=\"bottom-right\" hideProgressBar />\r\n      <CssBaseline />\r\n      <Header darkMode={darkMode} handleThemeChange={handleThemeChange} />\r\n      <Route exact path=\"/\" component={HomePage} />\r\n      <Route\r\n        path={\"/(.+)\"}\r\n        render={() => (\r\n          <Container sx={{ mt: 4 }}>\r\n            <Switch>\r\n              <Route exact path=\"/catalog\" component={Catalog} />\r\n              <Route path=\"/catalog/:id\" component={ProductDetails} />\r\n              <Route path=\"/about\" component={AboutPage} />\r\n              <Route path=\"/contact\" component={ContactPage} />\r\n              <Route path=\"/contact\" component={ContactPage} />\r\n              <Route path=\"/basket\" component={BasketPage} />\r\n              <PrivateRoute path=\"/checkout\" component={CheckoutWrapper} />\r\n              <PrivateRoute path=\"/orders\" component={Orders} />\r\n              <Route path=\"/login\" component={Login} />\r\n              <Route path=\"/register\" component={Register} />\r\n              <Route component={NotFound} />\r\n            </Switch>\r\n          </Container>\r\n        )}\r\n      />\r\n    </ThemeProvider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import { ReportHandler } from 'web-vitals';\r\n\r\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./app/layout/styles.css\";\r\nimport App from \"./app/layout/App\";\r\nimport reportWebVitals from \"./reportWebVitals\";\r\nimport { Router } from \"react-router-dom\";\r\nimport { createBrowserHistory } from \"history\";\r\nimport { store } from \"./app/store/configureStore\";\r\nimport { Provider } from \"react-redux\";\r\nimport \"slick-carousel/slick/slick.css\"; \r\nimport \"slick-carousel/slick/slick-theme.css\";\r\n\r\nexport const history = createBrowserHistory();\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Router history={history}>\r\n      <Provider store={store}>\r\n        <App />\r\n      </Provider>\r\n    </Router>\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}